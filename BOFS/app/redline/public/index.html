<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Redline</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css"
          integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">
    <script type="text/javascript" src="https://unpkg.com/micromodal/dist/micromodal.min.js"></script>
    <script type="text/javascript" src="Build/UnityLoader.js"></script>
    <script type="text/javascript" src="UnityProgress.js"></script>
</head>
<body>
<div id="setHeader">
    <p>Demo instance of Redline Experimentation Environment</p>
</div>
<div id="loader">
    <div class="spinner">
        <div class="rect rect1"></div>
        <div class="rect rect2"></div>
        <div class="rect rect3"></div>
        <div class="rect rect4"></div>
        <div class="rect rect5"></div>
        <div class="rect rect6"></div>
        <div class="rect rect7"></div>
        <div class="rect rect8"></div>
        <div class="rect rect9"></div>
    </div>
</div>

<div class="webgl-content">
    <div id="gameContainer"
         style="width: 960px; height: 600px; margin: auto;"></div>
</div>


<div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1">
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
            <header class="modal__header">
                <h2 class="modal__title" id="modal-1-title">
                    Set up
                </h2>
            </header>
            <main class="modal__content" id="modal-1-content">
                <form class="pure-form pure-form-stacked"
                        name="settingsForm">
                    <label for="set">Which set would you like to play?</label>
                    <select name="set" required>
                        <option value="0">1</option>
                        <option value="1">2</option>
                    </select>
                    <label for="condition">Which health bar would you like to try out?</label>
                    <select name="condition" required>
                        <option value="1">Normal</option>
                        <option value="0">Enhanced/Manipulated</option>
                    </select>
                    <label for="gender">Which gender would you like your avatar to have?</label>
                    <select name="gender" required>
                        <option value="0">Female</option>
                        <option value="1">Male</option>
                    </select>
                </form>
            </main>
            <footer class="modal__footer">
                <button onclick="submitData()"
                        class="pure-button pure-button-primary"
                        data-micromodal-close
                        aria-label="Close this dialog window">
                    Okay
                </button>
            </footer>
        </div>
    </div>
</div>

<script>
    console.log(MicroModal);
    MicroModal.init();
    MicroModal.show('modal-1');
    var params = {};

    function submitData() {
        var form = document.forms["settingsForm"];
        params = {
            pid: 11111,
            set: form['set'].value,
            condition: form['condition'].value,
            gender: form['gender'].value
        };
        var gameInstance = UnityLoader.instantiate(
            "gameContainer",
            "Build/public.json",
            {onProgress: UnityProgress}
        );
    }

    function GetParams() {
        return params;
    }
</script>
</body>
</html>
