<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Redline</title>
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="https://unpkg.com/micromodal/dist/micromodal.min.js"></script>
    <script type="text/javascript" src="Build/UnityLoader.js"></script>
    <script type="text/javascript" src="UnityProgress.js"></script>
</head>
<body>
<div id="setHeader">
    <p>Demo instance of Redline Experimentation Environment</p>
</div>
<div id="loader">
    <div class="spinner">
        <div class="rect rect1"></div>
        <div class="rect rect2"></div>
        <div class="rect rect3"></div>
        <div class="rect rect4"></div>
        <div class="rect rect5"></div>
        <div class="rect rect6"></div>
        <div class="rect rect7"></div>
        <div class="rect rect8"></div>
        <div class="rect rect9"></div>
    </div>
</div>

<div class="webgl-content">
    <div id="gameContainer"
         style="width: 960px; height: 600px; margin: auto;"></div>
</div>


<div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
            <header class="modal__header">
                <h2 class="modal__title" id="modal-1-title">
                    Micromodal
                </h2>
                <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
            </header>
            <main class="modal__content" id="modal-1-content">
                <form
                    name="settingsForm">
                    <p>Which set would you like to play?</p>
                    <select name="set" required>
                        <option value="0">1</option>
                        <option value="1">2</option>
                    </select>
                    <p>Which health bar would you like to try out?</p>
                    <select name="condition" required>
                        <option value="1">Normal</option>
                        <option value="0">Enhanced/Manipulated</option>
                    </select>
                    <p>Which gender would you like your avatar to have?</p>
                    <select name="gender" required>
                        <option value="0">Female</option>
                        <option value="1">Male</option>
                    </select>
                </form>
            </main>
            <footer class="modal__footer">
                <button onclick="submitData()"
                        class="modal__btn"
                        data-micromodal-close
                        aria-label="Close this dialog window">
                    Okay</button>
            </footer>
        </div>
    </div>
</div>

<script>
    console.log(MicroModal);
    MicroModal.init();
    MicroModal.show('modal-1');
    var params = {};
    function submitData() {
        var form = document.forms["settingsForm"];
        params = {
            pid: 11111,
            set: form['set'].value,
            condition: form['condition'].value,
            gender: form['gender'].value
        };
        var gameInstance = UnityLoader.instantiate(
            "gameContainer",
            "Build/public.json",
            {onProgress: UnityProgress}
            );
    }

    function GetParams() {
        return params;
    }
</script>
</body>
</html>
